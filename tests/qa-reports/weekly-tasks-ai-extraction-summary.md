# QA 요약: 주간보고서 AI → 업무 생성

**버전**: v0.1.0-alpha.10
**작성일**: 2026-02-09
**QA**: 나검수

---

## 🎯 평가 결과

| 항목 | 상태 |
|------|------|
| **기본 플로우** | ✅ 정상 작동 |
| **예외 처리** | ⚠️ 개선 필요 |
| **보안** | ✅ 통과 (권한, 멀티테넌시) |
| **배포 가능 여부** | ⚠️ 조건부 가능 (내부 테스트 환경) |

---

## 🔴 즉시 수정 필요 (Critical)

### BUG-001: 부분 실패 시 데이터 손실
- **문제**: 3개 업무 생성 중 2번째 실패 → 1개만 생성되지만 extractedTasks 전체 초기화 → 실패한 2개 재시도 불가
- **영향**: 사용자 데이터 손실
- **수정**: 개별 에러 처리, 실패한 업무만 미리보기에 유지
- **파일**: `apps/frontend/src/app/(dashboard)/tasks/page.tsx:201-236`

### BUG-002: 53주차 계산 오류
- **문제**: 2027년 52주차 → nextWeek=53 계산하지만 2027년은 52주까지만 존재 → 잘못된 주차 업무 생성
- **영향**: 캘린더 뷰에서 보이지 않는 업무 생성
- **수정**: `getWeeksInYear()` 함수로 연도별 최대 주차 확인 후 계산
- **파일**: `apps/frontend/src/app/(dashboard)/tasks/page.tsx:208-209`

---

## 🟠 다음 스프린트 수정 (High)

### BUG-003: 중복 클릭 방지 없음
- **문제**: "업무 추출" 버튼 연속 클릭 가능 → 2번의 API 호출
- **수정**: 버튼에 `disabled={extractLoading}` 추가

### BUG-005: JSON 파싱 취약성
- **문제**: AI가 "업무입니다: [...]" 형식으로 응답 시 파싱 실패 가능
- **수정**: 정규식 강화, 구조 검증 추가
- **파일**: `apps/backend/src/modules/ai/ai.service.ts:244-248`

### BUG-007: 업무 중복 생성 방지 없음
- **문제**: 동일 보고서로 여러 번 업무 추출 → 중복 생성
- **수정**: Backend unique constraint 또는 Frontend 중복 체크

---

## 🟡 개선사항 (Medium/Low)

- **BUG-006**: 모든 업무가 ANALYST에게 자동 할당 → assigneeId 제거 (수동 할당)
- **ENHANCE-001**: 업무 생성 진행 상태 표시 (Progress bar)
- **ENHANCE-002**: 추출 결과 빈 배열 시 명확한 안내 메시지
- **ENHANCE-003**: 태그 편집 UI 추가

---

## ✅ 보안 검증 통과

- JWT 인증: ✅
- 권한 체크: ✅ (ANALYST 이상만 접근)
- Tenant 격리: ✅ (멀티테넌시 보장)
- XSS 위험: ⚠️ AI 응답 Sanitization 권고

---

## 📋 권장 조치

1. **긴급 수정**: BUG-001, BUG-002 수정 후 재배포
2. **다음 스프린트**: BUG-003, BUG-005, BUG-007 수정
3. **백로그**: 사용성 개선 사항

**배포 결정**: 내부 테스트 환경 배포 → 긴급 수정 → 프로덕션 배포

---

**상세 리포트**: `weekly-tasks-ai-extraction-qa.md`
